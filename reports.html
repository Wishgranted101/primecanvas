<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prime Canvas: New Report Input</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        :root {
            --pc-primary: #0A1C30; /* Deep Slate Blue */
            --pc-accent: #0D6EFD; /* Primary Blue */
            font-family: 'Inter', sans-serif;
        }
        body { background-color: #F7F9FB; }
        .pc-card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
        }
        input[type="text"], input[type="date"], textarea, select {
            border: 1px solid #D1D5DB;
            padding: 0.75rem;
            border-radius: 0.5rem;
            width: 100%;
            transition: all 0.15s;
        }
        input:focus, textarea:focus, select:focus {
            border-color: var(--pc-accent);
            outline: none;
            box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.2);
        }
        .severity-low { background-color: #D1FAE5; color: #065F46; } /* Green */
        .severity-medium { background-color: #FEF3C7; color: #92400E; } /* Yellow */
        .severity-high { background-color: #FEE2E2; color: #991B1B; } /* Red */
    </style>
</head>
<body class="antialiased min-h-screen">

    <!-- Navigation Header -->
    <header class="bg-white sticky top-0 z-10 border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-black text-[var(--pc-primary)] flex items-center">
                <svg class="w-6 h-6 mr-2 text-[var(--pc-accent)]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.148M20 10h-2.207l-3.37-3.37a2 2 0 00-2.828 0L6.707 10H4a2 2 0 00-2 2v10a2 2 0 002 2h16a2 2 0 002-2V12a2 2 0 00-2-2z"></path></svg>
                New Report: INPUT DATA
            </h1>
            <nav class="space-x-4 flex items-center">
                <a href="#" class="text-sm font-medium text-gray-600 hover:text-gray-900">Dashboard</a>
                <a href="#" class="text-sm font-medium text-gray-600 hover:text-gray-900" onclick="showClients()">Clients</a>
                <a href="#" class="text-sm font-medium text-gray-600 hover:text-gray-900">Settings</a>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <!-- Report Generation CTA (Output Trigger) -->
        <div class="pc-card p-6 sm:p-8 mb-8 flex flex-col md:flex-row justify-between items-start md:items-center bg-blue-50 border-t-8 border-[var(--pc-accent)]">
            <div class="mb-4 md:mb-0">
                <p class="text-xl font-bold text-[var(--pc-primary)]">Ready to deliver your high-end result?</p>
                <p class="text-gray-600 text-sm">Review your data, then trigger the automatic generation of your branded PDF.</p>
            </div>
            <button onclick="generateReport()" class="bg-green-600 text-white px-8 py-3 rounded-xl text-lg font-bold hover:bg-green-700 transition duration-150 shadow-lg shadow-green-500/50 flex items-center w-full md:w-auto">
                <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                GENERATE BRANDED REPORT (OUTPUT)
            </button>
        </div>

        <!-- Two Column Layout for Input Forms -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <!-- Left Column: Primary Details & Summary (lg:col-span-1) -->
            <div class="lg:col-span-1 space-y-8">
                
                <!-- Client & Project Info -->
                <div class="pc-card p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">1. Core Project Details</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="client-select" class="block text-sm font-medium text-gray-700 mb-1">Select Client</label>
                            <select id="client-select" onchange="updateProjectTitle()" class="select-input">
                                <option value="" disabled selected>-- Choose Existing Client --</option>
                                <option value="Starlight Corp">Starlight Corp</option>
                                <option value="City Planning Office">City Planning Office</option>
                                <option value="Private Investor A">Private Investor A</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">Client not found? <a href="#" onclick="showClients()" class="text-[var(--pc-accent)] hover:underline">Add New Client</a></p>
                        </div>
                        <div>
                            <label for="report-title" class="block text-sm font-medium text-gray-700 mb-1">Report Title</label>
                            <input type="text" id="report-title" value="Valuation Report: 123 Main Street" placeholder="e.g., Feasibility Study: Downtown Tower" class="text-input font-semibold">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="date-conducted" class="block text-sm font-medium text-gray-700 mb-1">Date Conducted</label>
                                <input type="date" id="date-conducted" value="2025-10-26" class="date-input">
                            </div>
                            <div>
                                <label for="report-type" class="block text-sm font-medium text-gray-700 mb-1">Report Type</label>
                                <select id="report-type" class="select-input">
                                    <option>Standard Inspection</option>
                                    <option>Asset Valuation</option>
                                    <option selected>Feasibility Analysis</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Executive Summary Input -->
                <div class="pc-card p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">2. Executive Summary Draft</h3>
                    <label for="executive-summary" class="block text-sm font-medium text-gray-700 mb-1">Initial Summary (Optional)</label>
                    <textarea id="executive-summary" rows="6" placeholder="Draft a brief, high-level overview here. The system will formalize this text." class="textarea-input">Overall findings indicate a highly viable investment opportunity with a 90% confidence score, provided the structural recommendations are adopted. Minimal short-term risk identified. This is a strong buy recommendation.</textarea>
                    <p class="text-xs text-gray-500 mt-2">Maximum 150 words. Focus on core findings and recommendation.</p>
                </div>
            </div>

            <!-- Right Column: Structured Data & Media (lg:col-span-2) -->
            <div class="lg:col-span-2 space-y-8">

                <!-- Structured Findings Input -->
                <div class="pc-card p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">3. Structured Data & Findings</h3>
                    <p class="text-sm text-gray-600 mb-4">Input detailed, section-specific data points. These will populate charts and key results tables in the final report.</p>
                    
                    <div id="findings-container" class="space-y-4">
                        <!-- Finding Item 1 -->
                        <div class="finding-item p-4 border border-gray-200 rounded-lg">
                            <div class="grid grid-cols-1 sm:grid-cols-4 gap-4">
                                <input type="text" placeholder="Area/Room (e.g., HVAC System)" value="Foundation Slab" class="col-span-2">
                                <select class="severity-low">
                                    <option selected class="severity-low">Low Severity</option>
                                    <option class="severity-medium">Medium Severity</option>
                                    <option class="severity-high">High Severity</option>
                                </select>
                                <input type="text" placeholder="Score (e.g., 9.5/10)" value="9.8/10" class="col-span-1">
                            </div>
                            <textarea rows="2" placeholder="Specific finding notes..." class="mt-2">Minor surface cracking observed (hairline fractures). Cosmetic issue only; structural integrity is excellent.</textarea>
                        </div>
                        
                        <!-- Finding Item 2 -->
                        <div class="finding-item p-4 border border-gray-200 rounded-lg">
                            <div class="grid grid-cols-1 sm:grid-cols-4 gap-4">
                                <input type="text" placeholder="Area/Room (e.g., HVAC System)" value="Roof Membrane" class="col-span-2">
                                <select class="severity-medium">
                                    <option class="severity-low">Low Severity</option>
                                    <option selected class="severity-medium">Medium Severity</option>
                                    <option class="severity-high">High Severity</option>
                                </select>
                                <input type="text" placeholder="Score (e.g., 9.5/10)" value="7.5/10" class="col-span-1">
                            </div>
                            <textarea rows="2" placeholder="Specific finding notes..." class="mt-2">Membrane shows average wear for age. Expect replacement or significant maintenance within 3-5 years. Budget recommendation included.</textarea>
                        </div>
                    </div>
                    
                    <button onclick="addFinding()" class="mt-4 text-[var(--pc-accent)] hover:text-blue-700 text-sm font-medium flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Add New Finding
                    </button>
                </div>

                <!-- Media Upload Area -->
                <div class="pc-card p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">4. Photo & Media Upload</h3>
                    <p class="text-sm text-gray-600 mb-4">Drag and drop up to 20 images. The system will automatically tag and resize them for the final report.</p>
                    
                    <div id="drop-area" class="border-2 border-dashed border-gray-300 rounded-lg p-10 text-center cursor-pointer hover:border-[var(--pc-accent)] transition duration-150">
                        <svg class="w-12 h-12 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>
                        <p class="mt-2 text-sm font-medium text-gray-600">Drag & drop files here, or click to browse</p>
                        <p class="text-xs text-gray-500">Max file size 5MB per photo.</p>
                    </div>

                    <div id="file-list" class="mt-4 space-y-2">
                        <!-- Placeholder for uploaded files -->
                        <div class="flex justify-between items-center text-sm text-gray-700 p-2 bg-gray-50 rounded">
                            <span>IMG_4815_Roof.jpg</span>
                            <span class="text-xs text-green-600">Uploaded (2.1MB)</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-700 p-2 bg-gray-50 rounded">
                            <span>IMG_4816_Foundation.jpg</span>
                            <span class="text-xs text-green-600">Uploaded (1.8MB)</span>
                        </div>
                    </div>

                </div>

            </div>
        </div>

    </main>

    <!-- Simple Custom Modal for Alerts/Confirmation -->
    <div id="custom-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden items-center justify-center p-4 z-50">
        <div class="bg-white p-8 rounded-xl shadow-2xl max-w-lg w-full">
            <h4 id="modal-title" class="text-2xl font-bold text-[var(--pc-primary)] mb-4"></h4>
            <p id="modal-message" class="text-gray-600 mb-6"></p>
            <div class="flex justify-end space-x-3">
                <button onclick="closeModal()" class="text-gray-600 px-4 py-2 rounded-lg hover:bg-gray-100 transition">Cancel</button>
                <button id="modal-confirm" class="bg-[var(--pc-accent)] text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition">Confirm</button>
            </div>
        </div>
    </div>

    <script>
        // Modal functions
        const modal = document.getElementById('custom-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalMessage = document.getElementById('modal-message');
        const modalConfirm = document.getElementById('modal-confirm');

        function openModal(title, message, onConfirm) {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            modalConfirm.onclick = onConfirm;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeModal() {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        // --- Core Input Screen Logic ---

        function generateReport() {
            openModal(
                "Confirm Report Generation",
                "Are you sure you want to generate the final branded PDF now? Once generated, data edits will require a revision.",
                () => {
                    closeModal();
                    // In a real application, this triggers the server-side generation process.
                    alert('Generating Report... The system is now applying your brand colors, template (Executive), and formatting all structured data and images into a premium, consistent PDF!');
                }
            );
        }

        function updateProjectTitle() {
            const select = document.getElementById('client-select');
            const title = document.getElementById('report-title');
            if (select.value === 'Starlight Corp') {
                 title.value = "Valuation Report: 123 Main Street";
            } else if (select.value === 'City Planning Office') {
                 title.value = "Feasibility Study: Downtown Tower Redesign";
            } else {
                 title.value = "";
            }
        }
        
        let findingCounter = 3; // Start after initial two
        function addFinding() {
            const container = document.getElementById('findings-container');
            const newItem = document.createElement('div');
            newItem.className = 'finding-item p-4 border border-gray-200 rounded-lg';
            newItem.innerHTML = `
                <div class="grid grid-cols-1 sm:grid-cols-4 gap-4">
                    <input type="text" placeholder="Area/Room (e.g., Attic/Roof)" class="col-span-2">
                    <select>
                        <option class="severity-low">Low Severity</option>
                        <option class="severity-medium">Medium Severity</option>
                        <option class="severity-high">High Severity</option>
                    </select>
                    <input type="text" placeholder="Score (e.g., 9.5/10)" class="col-span-1">
                </div>
                <textarea rows="2" placeholder="Specific finding notes..." class="mt-2"></textarea>
            `;
            container.appendChild(newItem);
        }

        function showClients() {
            // Placeholder for navigating to the next screen
            openModal(
                "Navigate to Clients Screen",
                "This action would typically navigate you to the Clients management screen to add or edit client details. Shall we proceed to that screen mockup now?",
                () => {
                    closeModal();
                    alert('Simulating navigation to the Clients Screen...');
                }
            );
        }
    </script>
</body>
</html>
